

# Maintainer: Shivansh <shivansh-007 + aur at outlook <.> com>
# Maintainer: SuperMazingCoder  <supermazingcoder + aur at gmail <.> com>
# Contributor: Kenee Patel <patelkenee2804 + aur at gmail <.> com>

# Package name to be displayed as title, note git is added because piston cli will be installed from the main github code itself and not from the github latest release.
pkgname=piston-cli-git
# Package name that will be used to ease out package variable name that follows.
_pkgname=piston-cli
# Package latest release version that will get updated with the pkgver() function below to get the latest version.
pkgver=r71.094d30a
pkgrel=1
# Package description to be shown below title.
pkgdesc="A universal shell supporting 36+ languages, in terminal code editor with syntax highlight, code compiler (36+ languages). It can run code from pastebin links and files too. "
# Architecture that will be supported.
arch=('any')
# The main url to github page.
url="https://github.com/Shivansh-007/piston-cli.git"
# License that is applied on this project.
license=('MIT')
# Dependencies that will be used to run piston-cli.
depends=( 
 'python-pygments'
 'python-requests'
 'python-prompt_toolkit'
 'python-rich'
 'python-argparse'
)
# Make-Dependencies that will not be used to run piston-cli but will be used to make/install it.
makedepends=( 
 'git'
 'python-setuptools'
)
# Optional Dependencies none right now.
optdepends=()
provides=('piston-cli')
conflicts=('piston-cli')
# The address to download the source code of the main github page.
source=('git'+$url)
sha256sums=('SKIP')

build() {
 cd "$_pkgname"
 python setup.py build
}

# to install the main module and the LICENSE in the correct location.
package() {
 cd "$_pkgname"
 python setup.py install --root="${pkgdir}/" --optimisze=1 --skip-build
 install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

# The function that will update the latest version.
pkgver() {
 cd "$srcdir/$_pkgname"
 printf "r%s.%s" $(git rev-list --count HEAD) $(git rev-parse --short HEAD)
}
